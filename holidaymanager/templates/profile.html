{% extends 'base.html' %}
{% block content %}
<div class="container">
    <h1 class="uppercase center profile-title">{{ account.username }}'s Profile</h1>

    <!-- Profile Details -->
    <div class="card profile-card">
        <h5 class="center details-title">Details</h5>
        <div class="card-content profile-details">
            <div class="row">
                <div class="col s12 details-field">
                    <p>Username: {{ account.username }}</p>
                </div>
                <div class="col s6 details-field">
                    <p>First Name: {{ account.first_name }}</p>
                </div>
                <div class="col s6 details-field">
                    <p>Last Name: {{ account.last_name }}</p>
                </div>
                <div class="col s12 details-field">
                    <p>Email: {{ account.email }}</p>
                </div>
            </div>
        </div>
        <a href="{{ url_for('change_details', user_id=account.id )}}"
            class="btn profile-btn btn-small blue accent-3">Change Details</a>
        <a href="{{ url_for('change_password', user_id=account.id )}}"
            class="btn profile-btn btn-small blue accent-3">Change Password</a>
    </div>
    <hr>

    <!-- CaravanBookings -->
    <h5 class="center booking-title">Caravan Bookings</h5>
    {% for booking in c_bookings %}
    {% if account.id == booking.user_id %}
    <div class="card caravan-booking">
        <div class="card-content">
            <div class="row">
                <div class="col s12 booking-details">
                    <p>{{ booking.caravan_name }}</p>
                    <p>{{ booking.start_date }} - {{ booking.end_date }}</p>
                </div>
            </div>
        </div>
        <a class="btn btn-small red accent-3 modal-trigger" href="#modal-delete-{{ booking.id }}">Delete</a>

        <!-- Modal Structure -->
        <div id="modal-delete-{{ booking.id }}" class="modal">
            <div class="modal-content">
                <h4 class="center">Are you sure you want to cancel this booking?</h4>
                <p class="center">{{ booking.caravan_name }}</p>
                <p class="center">{{ booking.start_date }} - {{ booking.end_date }}</p>
            </div>
            <div class="modal-footer">
                <a href="#" class="modal-close btn btn-small red accent-3">Delete</a>
            </div>
        </div>
    </div>
    {% endif %}
    {% endfor %}
    <hr>

    <!-- EventBookings -->
    <h5 class="center booking-title">Event Bookings</h5>
    {% for booking in e_bookings %}
    {% if account.id == booking.user_id %}
    <div class="card event-booking">
        <div class="card-content">
            <div class="row">
                <div class="col s12 booking-details">
                    <p>{{ booking.event_name }}</p>
                    <p>{{ booking.event_date }}</p>
                </div>
            </div>
        </div>
        <a class="btn btn-small red accent-3 modal-trigger" href="#modal-delete-{{ booking.id }}">Delete</a>

        <!-- Modal Structure -->
        <div id="modal-delete-{{ booking.id }}" class="modal">
            <div class="modal-content">
                <h4 class="center">Are you sure you want to cancel this booking?</h4>
                <p class="center">{{ booking.event_name }}</p>
            </div>
            <div class="modal-footer">
                <a href="#" class="modal-close btn btn-small red accent-3">Delete</a>
            </div>
        </div>
    </div>
    {% endif %}
    {% endfor %}
</div>
{% endblock %}